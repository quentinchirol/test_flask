<!DOCTYPE HTML>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Accidents de la vie courante</title>
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/4.3.0/css/fixedColumns.dataTables.min.css">

  <!-- Ton CSS local -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}">
</head>
<body>
    
        <!-- header-->
    <header id="header">
        <div class="logo">
            <a href="{{ url_for('index') }}" class="{% if request.path == url_for('index') %}active{% endif %}">
                <img src="{{ url_for('static', filename='images/calyxi.png') }}" alt="Calyxis Logo" style="height: 50px;">
            </a>
            </div>
             <!-- Navigation links inline -->
             <a href="{{ url_for('index') }}" class="{% if request.path == url_for('index') %}active{% endif %}">Accueil</a>
             <a href="{{ url_for('upload') }}" class="{% if request.path == url_for('upload') %}active{% endif %}">Importer un nouveau fichier</a>
             <a href="{{ url_for('ki2') }}" class="{% if request.path == url_for('ki2') %}active{% endif %}">Exploration des corrélations</a>
             <a href="{{ url_for('tab_bord') }}" class="{% if request.path == url_for('tab_bord') %}active{% endif %}">Tableau de bord</a>
             <a href="{{ url_for('representativite') }}" class="{% if request.path == url_for('representativite') %}active{% endif %}">Test de représentativité</a>
    </header>

  <!-- Section One -->
  <section id="One" class="wrapper style3">
    <div class="inner">
      <header class="align-center">
        <p>_______________________</p>
        <h2>Test de l'indépendance</h2>
      </header>
    </div>
  </section>

  <section id="two" class="wrapper style2">
    <div class="inner">
        <div class="box">
            <div class="content">
                <header class="align-center">
                    <p>Un test d’indépendance permet de vérifier s’il existe un lien entre deux variables dans un ensemble de données. Par exemple, on peut se demander si le genre d’une personne (homme ou femme) a un lien avec le fait d’avoir déjà eu un accident. Ce test permet de déterminer si les différences observées entre les groupes sont dues au hasard ou si elles sont suffisamment importantes pour qu’on pense qu’il existe une vraie association.

Le test le plus courant pour cela est le test du khi². Il compare les répartitions des données observées avec celles qu’on obtiendrait si les deux variables n’étaient pas liées (c’est-à-dire indépendantes). Si les écarts sont trop grands, cela signifie qu’il y a probablement une relation entre les deux variables.

En résumé, ce test permet de répondre à la question : les deux variables évoluent-elles ensemble ou est-ce une coïncidence ?
</p>
                  <!-- Formulaire principal -->
                  <form method="post" enctype="multipart/form-data">       
                    {% if not columns %}
                    <div class="upload-box">
                        <label for="file-upload" class="upload-label">Fichier Excel :</label>
                        <input id="file-upload" type="file" name="file" accept=".xlsx" required class="upload-input">
                    </div>
                    {% endif %}

                    {% if columns %}
                        <label>Modaliter 1 :</label>
                        <select name="var1" required>
                            {% for col in columns %}
                                <option value="{{ col }}">{{ col }}</option>
                            {% endfor %}
                        </select>

                        <label>Modaliter 2 :</label>
                        <select name="var2" required>
                            {% for col in columns %}
                                <option value="{{ col }}">{{ col }}</option>
                            {% endfor %}
                        </select>
                    {% endif %}

                    <!-- Conteneur des boutons centré -->
                    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                        <button type="submit">Test Ki²</button>
                        {% if columns %}
                        </form> <!-- Fermeture du formulaire principal -->
                        
                        <!-- Formulaire de réinitialisation -->
                        <form method="get" action="{{ url_for('ki2_reset') }}">
                            <button type="submit">Réinitialiser les données charger</button>
                        </form>
                        {% endif %}
                  </div>


                  {% if result %}
                  <div class="results">
                    <h2>Résultats pour {{ result.var1 }} vs {{ result.var2 }}</h2>

                    <div class="stat">
                      <strong>Statistique de Khi²:</strong> {{ result.chi2 }}<br>
                      <strong>Degrés de liberté:</strong> {{ result.dof }}<br>
                      <strong>Valeur p:</strong> {{ result.p }}<br>
                      <strong>V de Cramér:</strong> {{ result.v }}
                    </div>

                    <h3>Table de contingence</h3>
                    <div class="table-container">
                    {{ result.table|safe }}
                    </div>
                  </div>
                  {% endif %}
                </header>
            </div>
        </div>
    </div>
</section>

    <!-- Footer -->
    <!-- Footer -->
    <footer id="footer">
        <div class="container">
            <ul class="icons">
                <li><img src="{{ url_for('static', filename='images/calyxis.png') }}" alt=""></li>
                <li> </li>
                <li><img src="{{ url_for('static', filename='images/mavie.png') }}" alt=""></li>
            </ul>
        </div>
    </footer>

    <!-- JS Scripts -->
    <script src="{{ url_for('static', filename='assets/js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/jquery.scrollex.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/skel.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/util.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>
  
</body>
</html>
